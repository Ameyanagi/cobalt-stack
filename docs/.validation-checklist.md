# Documentation Validation Checklist

Comprehensive quality assurance checklist for Cobalt Stack documentation.

## Table of Contents

- [Quick Validation](#quick-validation)
- [Content Quality Checks](#content-quality-checks)
- [Technical Accuracy Checks](#technical-accuracy-checks)
- [Formatting Consistency Checks](#formatting-consistency-checks)
- [Link Validation](#link-validation)
- [Code Sample Verification](#code-sample-verification)
- [Diagram Validation](#diagram-validation)
- [Accessibility Checks](#accessibility-checks)
- [Maintenance Tasks](#maintenance-tasks)

## Quick Validation

Run these commands to perform quick automated checks:

```bash
# Check for broken internal links
find docs -name "*.md" -exec grep -n '\[.*\](.*)' {} + | grep -v "http" | grep -v "^#"

# Check for TODO/FIXME markers
find docs -name "*.md" -exec grep -Hn "TODO\|FIXME\|XXX" {} +

# Check for spelling issues (requires aspell)
find docs -name "*.md" -exec aspell check {} \;

# Validate Mermaid diagrams (check for syntax errors)
find docs -name "*.md" -exec grep -A 100 '```mermaid' {} + | grep -v '```'

# Check for consistent header formatting
find docs -name "*.md" -exec grep -Hn '^#[^#]' {} +

# Check for trailing whitespace
find docs -name "*.md" -exec grep -n ' $' {} +
```

## Content Quality Checks

### Completeness
- [ ] All sections referenced in table of contents exist
- [ ] All promised topics are covered
- [ ] No "Coming soon" or "TBD" placeholders remain
- [ ] All code examples are complete and runnable
- [ ] All screenshots have descriptive captions
- [ ] All diagrams have explanatory text

### Clarity
- [ ] Technical jargon is explained on first use
- [ ] Examples are provided for complex concepts
- [ ] Step-by-step instructions are numbered
- [ ] Prerequisites are clearly stated
- [ ] Expected outcomes are described
- [ ] Common pitfalls are mentioned

### Accuracy
- [ ] All code samples compile/run without errors
- [ ] File paths match actual project structure
- [ ] API endpoints match backend implementation
- [ ] Version numbers are current
- [ ] Dependencies are correctly specified
- [ ] Environment variables are documented

### Usefulness
- [ ] Information is actionable
- [ ] Real-world use cases are provided
- [ ] Troubleshooting guidance included
- [ ] Performance considerations mentioned
- [ ] Security implications noted
- [ ] Best practices highlighted

## Technical Accuracy Checks

### Code Samples

For each code sample:
- [ ] Syntax highlighting language is correct
- [ ] Code is properly indented
- [ ] Imports are included
- [ ] Type annotations are present (TypeScript/Rust)
- [ ] Error handling is shown
- [ ] Comments explain complex logic

**Validation Script:**
```bash
# Extract and validate TypeScript code samples
find docs -name "*.md" -exec awk '/```typescript/,/```/' {} \; > /tmp/ts-samples.ts
npx tsc --noEmit /tmp/ts-samples.ts

# Extract and validate Rust code samples
find docs -name "*.md" -exec awk '/```rust/,/```/' {} \; > /tmp/rust-samples.rs
rustc --crate-type lib --cfg test /tmp/rust-samples.rs 2>&1 | grep -v "warning"
```

### API Documentation

- [ ] All endpoints documented in OpenAPI spec
- [ ] Request/response types match implementation
- [ ] HTTP status codes are accurate
- [ ] Authentication requirements specified
- [ ] Rate limiting documented
- [ ] Error responses detailed

**Validation:**
```bash
# Compare documented endpoints with OpenAPI spec
cat backend/openapi.json | jq '.paths | keys[]' | sort > /tmp/spec-endpoints.txt
grep -r "POST\|GET\|PUT\|DELETE\|PATCH" docs/api/ | grep -o '/api/[^"]*' | sort | uniq > /tmp/doc-endpoints.txt
diff /tmp/spec-endpoints.txt /tmp/doc-endpoints.txt
```

### Environment Variables

- [ ] All required variables documented
- [ ] Default values specified
- [ ] Validation rules explained
- [ ] Security sensitive vars marked
- [ ] Example values provided

**Validation:**
```bash
# Compare documented variables with .env.example
grep -h '^[A-Z_]' backend/.env.example frontend/.env.example | cut -d= -f1 | sort > /tmp/env-vars.txt
grep -rh '[A-Z_][A-Z_]*=' docs/ | grep -o '[A-Z_][A-Z_]*' | sort | uniq > /tmp/doc-env-vars.txt
comm -3 /tmp/env-vars.txt /tmp/doc-env-vars.txt
```

## Formatting Consistency Checks

### Headers

- [ ] H1 (`#`) used only for document title
- [ ] Headers follow hierarchical order (no H3 without H2)
- [ ] Header capitalization is consistent (Title Case or Sentence case)
- [ ] No periods at end of headers
- [ ] Headers are descriptive and scannable

**Pattern:**
```markdown
# Document Title

## Section Header

### Subsection Header

#### Detail Header
```

### Lists

- [ ] Consistent bullet style (- or * but not mixed)
- [ ] Nested lists properly indented (2 or 4 spaces)
- [ ] Parallel structure in list items
- [ ] Punctuation consistent across items
- [ ] No empty list items

**Pattern:**
```markdown
- Top level item
  - Nested item (2 spaces)
  - Another nested item
- Another top level item
```

### Code Blocks

- [ ] All code blocks have language identifier
- [ ] File paths in comments when showing file content
- [ ] Consistent indentation (2 or 4 spaces)
- [ ] No lines exceeding 100 characters (wrap if needed)
- [ ] Output examples shown where helpful

**Pattern:**
```markdown
\`\`\`typescript
// src/lib/example.ts
export function example() {
  return 'formatted correctly';
}
\`\`\`
```

### Tables

- [ ] All tables have headers
- [ ] Columns align consistently
- [ ] No empty cells (use "N/A" or "-")
- [ ] Complex data uses nested formatting
- [ ] Tables are responsive-friendly (<6 columns)

**Pattern:**
```markdown
| Column 1 | Column 2 | Column 3 |
|----------|----------|----------|
| Data 1   | Data 2   | Data 3   |
| Data 4   | Data 5   | Data 6   |
```

### Links

- [ ] Internal links use relative paths
- [ ] External links use absolute URLs
- [ ] Links have descriptive text (no "click here")
- [ ] All links include protocol (https://)
- [ ] Anchor links match header IDs

**Pattern:**
```markdown
- Internal: [Architecture](./architecture/overview.md)
- External: [Next.js Documentation](https://nextjs.org/docs)
- Anchor: [Installation](#installation)
```

## Link Validation

### Internal Links

Check all relative links resolve correctly:

```bash
# Find all internal links
find docs -name "*.md" -exec grep -Hn '\[.*\](\.\.*/[^)]*\.md)' {} + > /tmp/internal-links.txt

# Validate each link exists
while IFS=: read -r file line link; do
  target=$(echo "$link" | sed -n 's/.*(\([^)]*\)).*/\1/p')
  dir=$(dirname "$file")
  if [ ! -f "$dir/$target" ]; then
    echo "Broken link in $file:$line -> $target"
  fi
done < /tmp/internal-links.txt
```

### External Links

Check external URLs are reachable:

```bash
# Extract external URLs
find docs -name "*.md" -exec grep -oP 'https?://[^)]+' {} + | sort | uniq > /tmp/external-urls.txt

# Check each URL (requires curl)
while read -r url; do
  if ! curl -s -o /dev/null -w "%{http_code}" "$url" | grep -q "^[23]"; then
    echo "Broken external link: $url"
  fi
done < /tmp/external-urls.txt
```

### Anchor Links

Validate anchor links match headers:

```bash
# Find anchor links and verify headers exist
find docs -name "*.md" | while read -r file; do
  grep -o '\[.*\](#[^)]*)' "$file" | while read -r anchor; do
    id=$(echo "$anchor" | sed -n 's/.*#\([^)]*\)).*/\1/p')
    if ! grep -q "^#.*$id" "$file"; then
      echo "Broken anchor in $file: $anchor"
    fi
  done
done
```

## Code Sample Verification

### TypeScript Samples

```bash
# Create temporary file with all TypeScript samples
echo "// Auto-generated from documentation" > /tmp/ts-validation.ts

find docs -name "*.md" -print0 | while IFS= read -r -d '' file; do
  echo "// From: $file" >> /tmp/ts-validation.ts
  awk '/```typescript/,/```/' "$file" | sed '1d;$d' >> /tmp/ts-validation.ts
  echo "" >> /tmp/ts-validation.ts
done

# Validate with TypeScript compiler
cd frontend && npx tsc --noEmit /tmp/ts-validation.ts
```

### Rust Samples

```bash
# Create temporary file with all Rust samples
echo "// Auto-generated from documentation" > /tmp/rust-validation.rs

find docs -name "*.md" -print0 | while IFS= read -r -d '' file; do
  echo "// From: $file" >> /tmp/rust-validation.rs
  awk '/```rust/,/```/' "$file" | sed '1d;$d' >> /tmp/rust-validation.rs
  echo "" >> /tmp/rust-validation.rs
done

# Validate with Rust compiler
cd backend && rustc --crate-type lib /tmp/rust-validation.rs
```

### Shell Samples

```bash
# Extract and validate shell scripts
find docs -name "*.md" -exec awk '/```bash/,/```/' {} \; | sed '1d;$d' > /tmp/shell-validation.sh

# Check syntax with shellcheck
shellcheck /tmp/shell-validation.sh
```

## Diagram Validation

### Mermaid Diagrams

**Check Count:**
```bash
find docs -name "*.md" -exec grep -c '```mermaid' {} + | awk -F: '{sum+=$2} END {print "Total Mermaid diagrams:", sum}'
```

**Current Status:**
- `api-client.md`: 3 diagrams ✓
- `architecture.md`: 7 diagrams ✓
- `state-management.md`: 5 diagrams ✓
- `testing.md`: 4 diagrams ✓
- `themes.md`: 4 diagrams ✓

**Validation Checklist:**
- [ ] All diagrams render without errors
- [ ] Diagrams have descriptive text before/after
- [ ] Node labels are readable
- [ ] Color schemes are consistent
- [ ] Arrow directions are logical
- [ ] Complex diagrams are broken into smaller pieces

**Testing Diagrams:**
```bash
# Install mermaid CLI
npm install -g @mermaid-js/mermaid-cli

# Extract and test each diagram
find docs -name "*.md" | while read -r file; do
  awk '/```mermaid/,/```/' "$file" | sed '1d;$d' > /tmp/diagram.mmd
  if [ -s /tmp/diagram.mmd ]; then
    mmdc -i /tmp/diagram.mmd -o /tmp/diagram.png || echo "Error in $file"
  fi
done
```

### Diagram Accessibility

- [ ] Diagrams have alt text equivalents
- [ ] Color is not the only differentiator
- [ ] Text size is readable
- [ ] Contrast ratios meet WCAG standards
- [ ] Complex diagrams have textual descriptions

## Accessibility Checks

### Content Accessibility

- [ ] Headings form logical hierarchy
- [ ] Links have descriptive text
- [ ] Images have alt text
- [ ] Tables have headers
- [ ] Code samples have language labels
- [ ] Abbreviations defined on first use

### Language Clarity

- [ ] Active voice preferred over passive
- [ ] Sentences under 25 words average
- [ ] Technical terms explained
- [ ] Consistent terminology throughout
- [ ] Inclusive language used
- [ ] No idioms that don't translate well

### Visual Hierarchy

- [ ] Important information highlighted
- [ ] Callouts used appropriately
- [ ] Lists break up long paragraphs
- [ ] Whitespace improves readability
- [ ] Related content grouped together

## Maintenance Tasks

### Regular Updates (Weekly)

- [ ] Check for outdated version numbers
- [ ] Verify external links still work
- [ ] Update screenshots if UI changed
- [ ] Review and close stale TODO comments
- [ ] Check for new dependencies to document

### Quarterly Reviews

- [ ] Full link validation pass
- [ ] Code sample verification
- [ ] Diagram accuracy check
- [ ] User feedback incorporation
- [ ] Metrics review (page views, search terms)
- [ ] Competitor documentation comparison

### Release Checklist

Before each release:
- [ ] Update CHANGELOG.md
- [ ] Update version numbers
- [ ] Regenerate API documentation
- [ ] Validate all code samples
- [ ] Check screenshot currency
- [ ] Review breaking changes documentation
- [ ] Update migration guides

## Automated Validation

### GitHub Actions Workflow

Create `.github/workflows/docs-validation.yml`:

```yaml
name: Documentation Validation

on:
  pull_request:
    paths:
      - 'docs/**'
  push:
    branches:
      - main
    paths:
      - 'docs/**'

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Check markdown lint
        uses: actionshub/markdownlint@main

      - name: Check links
        uses: gaurav-nelson/github-action-markdown-link-check@v1
        with:
          use-quiet-mode: 'yes'
          config-file: '.github/markdown-link-check-config.json'

      - name: Spell check
        uses: rojopolis/spellcheck-github-actions@v0
        with:
          source_files: docs/**/*.md

      - name: Validate code samples
        run: |
          # TypeScript validation
          find docs -name "*.md" -exec awk '/```typescript/,/```/' {} \; > /tmp/ts-samples.ts
          cd frontend && npx tsc --noEmit /tmp/ts-samples.ts

      - name: Check for TODOs
        run: |
          if grep -r "TODO\|FIXME" docs/; then
            echo "Found TODO/FIXME comments in documentation"
            exit 1
          fi
```

### Pre-commit Hook

Create `.git/hooks/pre-commit`:

```bash
#!/bin/bash

# Run documentation validation before commit
echo "Validating documentation..."

# Check for trailing whitespace
if git diff --cached --name-only | grep '\.md$' | xargs grep -n ' $'; then
  echo "Error: Trailing whitespace found in markdown files"
  exit 1
fi

# Check for consistent header formatting
if git diff --cached --name-only | grep '\.md$' | xargs grep -n '^#[^# ]'; then
  echo "Error: Headers should have space after #"
  exit 1
fi

echo "Documentation validation passed!"
```

## Quality Metrics

Track these metrics over time:

### Content Metrics
- Total pages: 49
- Mermaid diagrams: 23+
- Code samples: ~200+
- External links: ~50+
- Internal links: ~150+

### Maintenance Metrics
- Last full validation: [Date]
- Broken links found: [Count]
- Outdated sections: [Count]
- User-reported issues: [Count]

### Usage Metrics (if available)
- Most visited pages
- Average time on page
- Search queries
- Bounce rate
- User feedback scores

## Issue Tracking

### Common Issues Template

```markdown
**Issue Type:** [Broken Link | Code Error | Outdated Info | Unclear]
**Location:** [File path and line number]
**Description:** [What's wrong]
**Suggested Fix:** [How to fix it]
**Priority:** [Low | Medium | High | Critical]
```

### Resolution Workflow

1. **Identify**: Find issue via validation or user report
2. **Document**: Create issue in tracker
3. **Prioritize**: Assign priority based on impact
4. **Fix**: Make necessary changes
5. **Verify**: Re-run validation checks
6. **Close**: Mark issue as resolved

## Related Documentation

- [Contributing Guidelines](./contributing/README.md)
- [Code Style Guide](./contributing/code-style.md)
- [Testing Requirements](./contributing/testing-requirements.md)

---

**Last Updated:** 2025-10-27
**Next Review:** 2025-11-27 (Monthly)
**Maintained By:** Cobalt Stack Team
